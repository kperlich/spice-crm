/* * *******************************************************************************
* This file is part of KReporter. KReporter is an enhancement developed
* by aac services k.s.. All rights are (c) 2016 by aac services k.s.
*
* This Version of the KReporter is licensed software and may only be used in
* alignment with the License Agreement received with this Software.
* This Software is copyrighted and may not be further distributed without
* witten consent of aac services k.s.
*
* You can contact us at info@kreporter.org
******************************************************************************* */
Ext.define("SpiceCRM.KReporter.DListmanager.model.contacts",{extend:"Ext.data.Model",alias:["widget.contactsModel"],fields:[{name:"id",mapping:"id"},{name:"firstname",mapping:"first_name"},{name:"lastname",mapping:"last_name"},{name:"accountname",mapping:"account_name"},{name:"accountid",mapping:"account_name"},{name:"email1",mapping:"email1"}]}),Ext.define("SpiceCRM.KReporter.DListmanager.model.kreports",{extend:"Ext.data.Model",alias:["widget.kreportsModel"],fields:[{name:"id",mapping:"id"},{name:"name",mapping:"name"},{name:"modulename",mapping:"modulename"}]}),Ext.define("SpiceCRM.KReporter.DListmanager.model.language",{extend:"Ext.data.Model",alias:["widget.languageModel"],fields:["lblid","value"]}),Ext.define("SpiceCRM.KReporter.DListmanager.model.listDLists",{extend:"Ext.data.Model",alias:["widget.KReportDListmanagerListDListsModel"],fields:[{name:"id",mapping:"id"},{name:"name",mapping:"name"}]}),Ext.define("SpiceCRM.KReporter.DListmanager.view.main.MainModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.main",data:{name:"KReportDListmanager"}}),Ext.define("SpiceCRM.KReporter.DListmanager.model.users",{extend:"Ext.data.Model",alias:["widget.usersModel"],fields:[{name:"id",mapping:"id"},{name:"username",mapping:"user_name"},{name:"firstname",mapping:"first_name"},{name:"lastname",mapping:"last_name"},{name:"email1",mapping:"email1"}]}),Ext.define("SpiceCRM.KReporter.DListmanager.store.contacts",{extend:"Ext.data.Store",requires:["SpiceCRM.KReporter.DListmanager.model.contacts"],model:"SpiceCRM.KReporter.DListmanager.model.contacts",isloaded:!1,proxy:{type:"ajax",url:"KREST/metadata/KReports/contacts",reader:{type:"json"}},listeners:{load:function(){this.isloaded=!0,Ext.globalEvents.fireEvent("contactsloaded")}}}),Ext.define("SpiceCRM.KReporter.DListmanager.store.listContacts",{extend:"Ext.data.Store",requires:["SpiceCRM.KReporter.DListmanager.model.contacts"],model:"SpiceCRM.KReporter.DListmanager.model.contacts",isloaded:!1,proxy:{type:"ajax",url:"KREST/KReporter/dlistmanager/contacts",extraParams:{contactids:[]},reader:{type:"json"}},listeners:{beforeload:function(a,b,c){}}}),Ext.define("SpiceCRM.KReporter.DListmanager.store.listKReports",{extend:"Ext.data.Store",requires:["SpiceCRM.KReporter.DListmanager.model.kreports"],model:"SpiceCRM.KReporter.DListmanager.model.kreports",isloaded:!1,proxy:{type:"ajax",url:"KREST/KReporter/dlistmanager/kreports",reader:{type:"json"}},listeners:{load:function(){this.isloaded=!0,Ext.globalEvents.fireEvent("kreportsloaded")}}}),Ext.define("SpiceCRM.KReporter.DListmanager.reader.languageReader",{extend:"Ext.data.reader.Json",alias:"reader.languageReader",getResponseData:function(a){var b=[];return Ext.Object.each(this.callParent([a]),function(a,c){b.push({lblid:a,value:c})}),b}}),Ext.define("SpiceCRM.KReporter.DListmanager.store.language",{extend:"Ext.data.Store",requires:["SpiceCRM.KReporter.DListmanager.model.language","SpiceCRM.KReporter.DListmanager.reader.languageReader"],model:"SpiceCRM.KReporter.DListmanager.model.language",isloaded:!1,proxy:{type:"ajax",url:"KREST/metadata/KReports/language",reader:{type:"languageReader"}},listeners:{load:function(){this.isloaded=!0,Ext.globalEvents.fireEvent("languageloaded")}}}),Ext.define("SpiceCRM.KReporter.DListmanager.store.listDLists",{extend:"Ext.data.Store",requires:["SpiceCRM.KReporter.DListmanager.model.listDLists"],model:"SpiceCRM.KReporter.DListmanager.model.listDLists",autoLoad:!0,autoSync:!1,proxy:{type:"ajax",url:"KREST/KReporter/dlistmanager/dlists",extraParams:{},reader:{type:"json"},writer:{type:"json"}}}),Ext.define("SpiceCRM.KReporter.DListmanager.store.users",{extend:"Ext.data.Store",requires:["SpiceCRM.KReporter.DListmanager.model.users"],model:"SpiceCRM.KReporter.DListmanager.model.users",isloaded:!1,proxy:{type:"ajax",url:"KREST/metadata/KReports/users",reader:{type:"json"}},listeners:{load:function(){this.isloaded=!0,Ext.globalEvents.fireEvent("usersloaded")}}}),Ext.define("SpiceCRM.KReporter.DListmanager.store.listUsers",{extend:"Ext.data.Store",requires:["SpiceCRM.KReporter.DListmanager.model.users"],model:"SpiceCRM.KReporter.DListmanager.model.users",isloaded:!1,proxy:{type:"ajax",url:"KREST/KReporter/dlistmanager/users",extraParams:{userids:[]},reader:{type:"json"}},listeners:{beforeload:function(a,b,c){}}}),Ext.define("SpiceCRM.KReporter.DListmanager.controller.Application",{extend:"Ext.app.Controller",doInit:function(){},finishInit:function(){},onLaunch:function(){},createGuId:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"==a?b:3&b|8;return c.toString(16)})}}),Ext.define("SpiceCRM.KReporter.DListmanager.controller.listContactsController",{extend:"Ext.app.ViewController",requires:[],alias:"controller.KReportDListmanagerListContactsController",config:{listen:{global:{}},control:{"#fieldFilter":{change:function(a,b){this.view.store.clearFilter(),""!==b&&this.view.store.filter("lastname",new RegExp(b,"i"))}},"#kreportsdDListmanagerlistdlistsgridaddbutton":{click:function(){this.openPopup()}},"#kreportsdDListmanagerlistdlistsgriddeletebutton":{click:function(){var a=this.view.getSelection();a.length>0&&(this.removeRecords(a),Ext.ComponentQuery.query("#KReportDListmanagerListDListsGrid")[0].controller.updateDList())}}}},removeRecords:function(a){this.view.store.remove(a)},openPopup:function(){Ext.create("SpiceCRM.KReporter.DListmanager.view.KReportDListmanager.popupContactsWindow",{}).show()}}),Ext.define("SpiceCRM.KReporter.DListmanager.controller.listDListsController",{extend:"Ext.app.ViewController",requires:[],alias:"controller.KReportDListmanagerListDListsController",config:{listen:{global:{saveFullRecord:"updateDList",addDList:"addDList",deleteFullRecord:"deleteDList"}},control:{"#fieldFilter":{change:function(a,b){this.view.store.clearFilter(),""!==b&&this.view.store.filter("name",new RegExp(b,"i")),Ext.ComponentQuery.query("#KReportDListmanagerDistributionTabsGrid")[0].disable()}},"#KReportDListmanagerListDListsGrid":{select:function(a,b){this.view.up("container").down("#KReportDListmanagerDistributionTabsGrid").enable();var c=Ext.data.StoreManager.lookup("KReportDListmanagerListUsersStore");c.removeAll();var d=Ext.data.StoreManager.lookup("KReportDListmanagerListContactsStore");d.removeAll();var e=Ext.data.StoreManager.lookup("KReportDListmanagerListKReportsStore");if(e.removeAll(),!b.get("dlistdata")||null===b.get("dlistdata")||""===b.get("dlistdata"))return!1;var f=Ext.decode(Ext.util.Format.htmlDecode(b.data.dlistdata));void 0!==f.users&&(c.getProxy().extraParams.userids=Ext.encode(f.users),c.load()),void 0!==f.contacts&&(d.getProxy().extraParams.contactids=Ext.encode(f.contacts),d.load()),void 0!==f.kreports&&(e.getProxy().extraParams.kreportids=Ext.encode(f.kreports),e.load())}},"#kreportsdlistmanagerlistdlistsgriddeletebutton":{click:function(){var a=this.view.getSelection(),b=[];Ext.each(a,function(a){b.push(a.get("id"))}),this.view.store.remove(a),Ext.globalEvents.fireEvent("deleteFullRecord",b)}},"#kreportsdlistmanagerlistdlistsgridaddbutton":{click:function(){Ext.Msg.prompt("new grouping","Please enter a name:",function(a,b){"ok"==a&&Ext.globalEvents.fireEvent("addDList",{listName:b})})}}}},addDList:function(a){var b={id:SpiceCRM.KReporter.DListmanager.Application.kGuid(),name:a.listName};Ext.Ajax.request({url:"KREST/KReporter/dlistmanager/savenewdlist",jsonData:b,method:"POST",success:function(a,c){var d=Ext.decode(a.responseText);if(d.success<=0)Ext.Msg.alert(languageGetText("LBL_ERROR","LBL_ERROR_UPDATEGROUPING"));else{var e=Ext.data.StoreManager.lookup("KReportDListmanagerListDListsStore");e.add(b)}},scope:this})},updateDList:function(){var a=Ext.ComponentQuery.query("#KReportDListmanagerListDListsGrid")[0].getSelection();if(a.length<=0)return!1;var b={users:[],contacts:[],kreports:[]},c=Ext.data.StoreManager.lookup("KReportDListmanagerListUsersStore").getData();Ext.each(c.items,function(a){b.users.push(a.data.id)});var d=Ext.data.StoreManager.lookup("KReportDListmanagerListContactsStore").getData();Ext.each(d.items,function(a){b.contacts.push(a.data.id)});var e=Ext.data.StoreManager.lookup("KReportDListmanagerListKReportsStore").getData();Ext.each(e.items,function(a){b.kreports.push(a.data.id)});var f={id:a[0].data.id,name:a[0].data.name,dlistdata:Ext.util.Format.htmlEncode(Ext.encode(b))};Ext.Ajax.request({url:"KREST/KReporter/dlistmanager/updatedlist",jsonData:f,method:"POST",success:function(a,b){var c=Ext.decode(a.responseText);c.success<=0&&Ext.Msg.alert(languageGetText("LBL_ERROR"),languageGetText("LBL_ERROR_UPDATEDLIST"))},scope:this});var g=Ext.data.StoreManager.lookup("KReportDListmanagerListDListsStore").findRecord("id",f.id);g.data.dlistdata=f.dlistdata},deleteDList:function(a){var b={id:a[0]};Ext.Ajax.request({url:"KREST/KReporter/dlistmanager/deletedlist",jsonData:b,method:"POST",success:function(a,b){var c=Ext.decode(a.responseText);c.success>0?(Ext.data.StoreManager.lookup("KReportDListmanagerListUsersStore").removeAll(),Ext.data.StoreManager.lookup("KReportDListmanagerListContactsStore").removeAll(),Ext.data.StoreManager.lookup("KReportDListmanagerListKReportsStore").removeAll()):Ext.Msg.alert(languageGetText("LBL_ERROR"),languageGetText("LBL_ERROR_DELETEGROUPING"))},scope:this})}}),Ext.define("SpiceCRM.KReporter.DListmanager.controller.listKReportsController",{extend:"Ext.app.ViewController",requires:[],alias:"controller.KReportDListmanagerListKReportsController",config:{listen:{global:{}},control:{"#fieldFilter":{change:function(a,b){this.view.store.clearFilter(),""!==b&&this.view.store.filter("name",new RegExp(b,"i"))}},"#kreportsdDListmanagerlistkreportsgridaddbutton":{click:function(){this.openPopup()}},"#kreportsdDListmanagerlistkreportsgriddeletebutton":{click:function(){var a=this.view.getSelection();a.length>0&&(this.removeRecords(a),Ext.ComponentQuery.query("#KReportDListmanagerListDListsGrid")[0].controller.updateDList())}}}},removeRecords:function(a){this.view.store.remove(a)},openPopup:function(){Ext.create("SpiceCRM.KReporter.DListmanager.view.KReportDListmanager.popupKReportsWindow",{}).show()}}),Ext.define("SpiceCRM.KReporter.DListmanager.controller.listUsersController",{extend:"Ext.app.ViewController",requires:[],alias:"controller.KReportDListmanagerListUsersController",config:{listen:{global:{}},control:{"#fieldFilter":{change:function(a,b){this.view.store.clearFilter(),""!==b&&this.view.store.filter("lastname",new RegExp(b,"i"))}},"#kreportsdDListmanagerlistdlistsgridaddbutton":{click:function(){this.openPopup()}},"#kreportsdDListmanagerlistdlistsgriddeletebutton":{click:function(){var a=this.view.getSelection();a.length>0&&(this.removeRecords(a),Ext.ComponentQuery.query("#KReportDListmanagerListDListsGrid")[0].controller.updateDList())}}}},removeRecords:function(a){this.view.store.remove(a)},openPopup:function(){Ext.create("SpiceCRM.KReporter.DListmanager.view.KReportDListmanager.popupUsersWindow",{}).show()}}),Ext.define("SpiceCRM.KReporter.DListmanager.controller.MainController",{extend:"Ext.app.ViewController",requires:[],saving:!1,alias:"controller.KReportDListmanagerMain",loadMask:void 0,config:{listen:{}},atoc:function(a){return a.replace(/[a-zA-Z]/g,function(a){return String.fromCharCode((a<="Z"?90:122)>=(a=a.charCodeAt(0)+13)?a:a-26)})}}),Ext.define("SpiceCRM.KReporter.DListmanager.controller.popupContactsController",{extend:"Ext.app.ViewController",requires:[],alias:"controller.KReportDListmanagerPopupContactsController",config:{listen:{global:{removeRecords:"removeRecords"}},control:{"#KReportDListmanagerPopupContactsGrid":{selectionchange:function(a,b,c){Ext.ComponentQuery.query("#KReportDListmanagerPopupContactsGrid")[0].view.setSelection(b)}},"#fieldFilter":{change:function(a,b){this.queryContacts(b)}}}},queryContacts:function(a){this.view.store.getProxy().extraParams.like=a,this.view.store.load()}}),Ext.define("SpiceCRM.KReporter.DListmanager.controller.popupKReportsController",{extend:"Ext.app.ViewController",requires:[],alias:"controller.KReportDListmanagerPopupKReportsController",config:{listen:{global:{removeRecords:"removeRecords"}},control:{"#KReportDListmanagerPopupKReportsGrid":{selectionchange:function(a,b,c){Ext.ComponentQuery.query("#KReportDListmanagerPopupKReportsGrid")[0].view.setSelection(b)}},"#fieldFilter":{change:function(a,b){this.view.store.getProxy().extraParams.nameFilter=b,this.view.store.load()}}}}}),Ext.define("SpiceCRM.KReporter.DListmanager.controller.popupUsersController",{extend:"Ext.app.ViewController",requires:[],alias:"controller.KReportDListmanagerPopupUsersController",config:{listen:{global:{removeRecords:"removeRecords"}},control:{"#KReportDListmanagerPopupUsersGrid":{selectionchange:function(a,b,c){Ext.ComponentQuery.query("#KReportDListmanagerPopupUsersGrid")[0].view.setSelection(b)}},"#fieldFilter":{change:function(a,b){this.view.store.getProxy().extraParams.nameFilter=b,this.view.store.load()}}}}}),Ext.define("SpiceCRM.KReporter.DListmanager.controller.windowContactsController",{extend:"Ext.app.ViewController",requires:[],alias:"controller.KReportDListmanagerWindowContactsController",config:{listen:{global:{}},control:{"#addContactsFromPopupContacts":{click:function(a){var b=Ext.ComponentQuery.query("#KReportDListmanagerPopupContactsGrid")[0].view.getSelection();Ext.data.StoreManager.lookup("KReportDListmanagerListContactsStore").add(b),Ext.globalEvents.fireEvent("saveFullRecord",{}),a.up("window").close()}}}}}),Ext.define("SpiceCRM.KReporter.DListmanager.controller.windowKReportsController",{extend:"Ext.app.ViewController",requires:[],alias:"controller.KReportDListmanagerWindowKReportsController",config:{listen:{global:{}},control:{"#addKReportsFromPopupKReports":{click:function(a){var b=Ext.ComponentQuery.query("#KReportDListmanagerPopupKReportsGrid")[0].view.getSelection();Ext.data.StoreManager.lookup("KReportDListmanagerListKReportsStore").add(b),Ext.ComponentQuery.query("#KReportDListmanagerListDListsGrid")[0].controller.updateDList(),Ext.ComponentQuery.query("#KReportDListmanagerPopupKReportsGrid")[0].view.store.clearFilter(),a.up("window").hide()}}}}}),Ext.define("SpiceCRM.KReporter.DListmanager.controller.windowUsersController",{extend:"Ext.app.ViewController",requires:[],alias:"controller.KReportDListmanagerWindowUsersController",config:{listen:{global:{}},control:{"#addUsersFromPopupUsers":{click:function(a){var b=Ext.ComponentQuery.query("#KReportDListmanagerPopupUsersGrid")[0].view.getSelection();Ext.data.StoreManager.lookup("KReportDListmanagerListUsersStore").add(b),Ext.globalEvents.fireEvent("saveFullRecord",{}),Ext.ComponentQuery.query("#KReportDListmanagerPopupUsersGrid")[0].view.store.clearFilter(),a.up("window").hide()}}}}}),Ext.define("SpiceCRM.KReporter.DListmanager.view.KReportDListmanager.popupContactsWindow",{extend:"Ext.window.Window",title:languageGetText("LBL_DLIST_WINDOW_ADDCONTACTS_TITLE"),layout:{type:"anchor",align:"middle"},width:400,modal:!0,autoHeight:!0,plain:!0,border:!1,resizable:!1,items:[{xtype:"KReportDListmanagerpopupContactsGrid",itemId:"KReportDListmanagerPopupContactsGrid"}],controller:"KReportDListmanagerWindowContactsController",buttons:[{text:languageGetText("LBL_CANCEL_BUTTON_LABEL"),handler:function(){this.up("window").close()}},{text:languageGetText("LBL_ADDLINK_ADD"),itemId:"addContactsFromPopupContacts"}],listeners:{show:function(a,b){var c=Ext.data.StoreManager.lookup("KReportDListmanagerPopupContactsStore");c.load()}}}),Ext.define("SpiceCRM.KReporter.DListmanager.view.KReportDListmanager.popupKReportsWindow",{extend:"Ext.window.Window",title:languageGetText("LBL_DLIST_WINDOW_ADDKREPORT_TITLE"),layout:{type:"anchor",align:"middle"},width:400,modal:!0,autoHeight:!0,plain:!0,border:!1,resizable:!1,items:[{xtype:"KReportDListmanagerpopupKReportsGrid",itemId:"KReportDListmanagerPopupKReportsGrid"}],controller:"KReportDListmanagerWindowKReportsController",buttons:[{text:languageGetText("LBL_CANCEL_BUTTON_LABEL"),handler:function(){this.up("window").close()}},{text:languageGetText("LBL_ADDLINK_ADD"),itemId:"addKReportsFromPopupKReports"}],listeners:{show:function(a,b){var c=Ext.data.StoreManager.lookup("KReportDListmanagerPopupKReportsStore");c.getProxy().extraParams.all="*",c.load()}}}),Ext.define("SpiceCRM.KReporter.DListmanager.view.KReportDListmanager.popupUsersWindow",{extend:"Ext.window.Window",title:languageGetText("LBL_DLIST_WINDOW_ADDUSERS_TITLE"),layout:{type:"anchor",align:"middle"},width:400,modal:!0,autoHeight:!0,plain:!0,border:!1,resizable:!1,items:[{xtype:"KReportDListmanagerpopupUsersGrid",itemId:"KReportDListmanagerPopupUsersGrid"}],controller:"KReportDListmanagerWindowUsersController",buttons:[{text:languageGetText("LBL_CANCEL_BUTTON_LABEL"),handler:function(){this.up("window").close()}},{text:languageGetText("LBL_ADDLINK_ADD"),itemId:"addUsersFromPopupUsers"}],listeners:{show:function(a,b){var c=Ext.data.StoreManager.lookup("KReportDListmanagerPopupUsersStore");c.getProxy().extraParams.all="*",c.load()}}}),Ext.define("SpiceCRM.KReporter.DListmanager.view.KReportDListmanager.distributionTabsGrid",{extend:"Ext.tab.Panel",itemId:"KReportDListmanagerDistributionTabsGrid",alias:["widget.KReportDListmanagerDistributionTabsGrid"],height:"100%",border:!0,disabled:!0,items:[{title:"Users",xtype:"KReportDListmanagerlistUsersGrid",itemId:"KReportDListmanagerlistUsersGrid"},{title:"Contacts",xtype:"KReportDListmanagerlistContactsGrid",itemId:"KReportDListmanagerlistContactsGrid"},{title:"KReports",xtype:"KReportDListmanagerlistKReportsGrid",itemId:"KReportDListmanagerListKReportsGrid"}]}),Ext.define("SpiceCRM.KReporter.DListmanager.view.KReportDListmanager.listContactsGrid",{extend:"Ext.grid.Panel",require:["SpiceCRM.KReporter.DListmanager.controller.listContactsController"],controller:"KReportDListmanagerListContactsController",alias:["widget.KReportDListmanagerlistContactsGrid"],store:Ext.create("SpiceCRM.KReporter.DListmanager.store.listContacts",{storeId:"KReportDListmanagerListContactsStore"}),title:languageGetText("LBL_GRID_USERSS"),height:"100%",border:!0,columns:[{text:languageGetText("LBL_DLIST_CONTACT_ID"),dataIndex:"id",itemId:"contactid",sortable:!1,width:150,hidden:!0},{text:languageGetText("LBL_DLIST_CONTACT_ACCOUNTNAME"),dataIndex:"accountname",itemId:"accountname",sortable:!1,flex:1},{text:languageGetText("LBL_DLIST_CONTACT_ACCOUNTID"),dataIndex:"accountid",itemId:"accountid",sortable:!1,flex:1,hidden:!0},{text:languageGetText("LBL_DLIST_FIRSTNAME"),dataIndex:"firstname",itemId:"firstname",sortable:!1,flex:1},{text:languageGetText("LBL_DLIST_LASTNAME"),dataIndex:"lastname",itemId:"lastname",sortable:!1,flex:1},{text:languageGetText("LBL_DLIST_EMAIL1"),dataIndex:"email1",itemId:"email1",sortable:!1,flex:1}],plugins:[],dockedItems:[{xtype:"toolbar",dock:"top",defaults:{padding:"5px 2px"},items:[{text:languageGetText("LBL_ADD_BUTTON_LABEL"),icon:"modules/KReports/images/add.png",itemId:"kreportsdDListmanagerlistdlistsgridaddbutton"},{text:languageGetText("LBL_REMOVE_BUTTON_LABEL"),icon:"modules/KReports/images/delete.png",itemId:"kreportsdDListmanagerlistdlistsgriddeletebutton"},"-",{xtype:"textfield",itemId:"fieldFilter",width:"50%"}]}]}),Ext.define("SpiceCRM.KReporter.DListmanager.view.KReportDListmanager.listDListsGrid",{extend:"Ext.grid.Panel",require:["SpiceCRM.KReporter.DListmanager.controller.listDListsController"],itemId:"KReportDListmanagerListDListsGrid",controller:"KReportDListmanagerListDListsController",alias:["widget.KReportDListmanagerlistDListsGrid"],store:Ext.create("SpiceCRM.KReporter.DListmanager.store.listDLists",{storeId:"KReportDListmanagerListDListsStore"}),title:languageGetText("LBL_GRID_DLISTS"),height:"100%",border:!0,columns:[{text:languageGetText("LBL_DLIST_ID"),dataIndex:"id",itemId:"dlistid",sortable:!1,width:150,hidden:!0},{text:languageGetText("LBL_DLIST_NAME"),dataIndex:"name",itemId:"dlistname",sortable:!1,flex:1,editor:{xtype:"textfield"}}],plugins:[Ext.create("Ext.grid.plugin.CellEditing",{clicksToEdit:2,listeners:{edit:function(a,b){b.record.commit()}}})],dockedItems:[{xtype:"toolbar",dock:"top",defaults:{padding:"5px 2px"},items:[{text:languageGetText("LBL_ADD_BUTTON_LABEL"),icon:"modules/KReports/images/add.png",itemId:"kreportsdlistmanagerlistdlistsgridaddbutton"},{text:languageGetText("LBL_DELETE_BUTTON_LABEL"),icon:"modules/KReports/images/delete.png",itemId:"kreportsdlistmanagerlistdlistsgriddeletebutton"},"-",{xtype:"textfield",itemId:"fieldFilter",width:"50%"}]}]}),Ext.define("SpiceCRM.KReporter.DListmanager.view.KReportDListmanager.listKReportsGrid",{extend:"Ext.grid.Panel",require:["SpiceCRM.KReporter.DListmanager.controller.listKReportsController"],controller:"KReportDListmanagerListKReportsController",alias:["widget.KReportDListmanagerlistKReportsGrid"],store:Ext.create("SpiceCRM.KReporter.DListmanager.store.listKReports",{storeId:"KReportDListmanagerListKReportsStore"}),title:languageGetText("LBL_GRID_USERSS"),height:"100%",border:!0,columns:[{text:languageGetText("LBL_DLIST_KREPORT_ID"),dataIndex:"id",itemId:"kreportid",sortable:!1,width:150,hidden:!0},{text:languageGetText("LBL_DLIST_NAME"),dataIndex:"name",itemId:"name",sortable:!1,flex:1},{text:languageGetText("LBL_DLIST_KREPORT_MODULENAME"),dataIndex:"modulename",itemId:"modulename",sortable:!1,flex:1}],plugins:[],dockedItems:[{xtype:"toolbar",dock:"top",defaults:{padding:"5px 2px"},items:[{text:languageGetText("LBL_ADD_BUTTON_LABEL"),icon:"modules/KReports/images/add.png",itemId:"kreportsdDListmanagerlistkreportsgridaddbutton"},{text:languageGetText("LBL_REMOVE_BUTTON_LABEL"),icon:"modules/KReports/images/delete.png",itemId:"kreportsdDListmanagerlistkreportsgriddeletebutton"},"-",{xtype:"textfield",itemId:"fieldFilter",width:"50%"}]}]}),Ext.define("SpiceCRM.KReporter.DListmanager.view.KReportDListmanager.listUsersGrid",{extend:"Ext.grid.Panel",require:["SpiceCRM.KReporter.DListmanager.controller.listUsersController"],controller:"KReportDListmanagerListUsersController",alias:["widget.KReportDListmanagerlistUsersGrid"],store:Ext.create("SpiceCRM.KReporter.DListmanager.store.listUsers",{storeId:"KReportDListmanagerListUsersStore"}),title:languageGetText("LBL_GRID_USERSS"),height:"100%",border:!0,columns:[{text:languageGetText("LBL_DLIST_USER_ID"),dataIndex:"id",itemId:"userid",sortable:!1,width:150,hidden:!0},{text:languageGetText("LBL_DLIST_USER_USERNAME"),dataIndex:"username",itemId:"username",sortable:!1,flex:1},{text:languageGetText("LBL_DLIST_FIRSTNAME"),dataIndex:"firstname",itemId:"firstname",sortable:!1,flex:1},{text:languageGetText("LBL_DLIST_LASTNAME"),dataIndex:"lastname",itemId:"lastname",sortable:!1,flex:1},{text:languageGetText("LBL_DLIST_EMAIL1"),dataIndex:"email1",itemId:"email1",sortable:!1,flex:1}],plugins:[],dockedItems:[{xtype:"toolbar",dock:"top",defaults:{padding:"5px 2px"},items:[{text:languageGetText("LBL_ADD_BUTTON_LABEL"),icon:"modules/KReports/images/add.png",itemId:"kreportsdDListmanagerlistdlistsgridaddbutton"},{text:languageGetText("LBL_REMOVE_BUTTON_LABEL"),icon:"modules/KReports/images/delete.png",itemId:"kreportsdDListmanagerlistdlistsgriddeletebutton"},"-",{xtype:"textfield",itemId:"fieldFilter",width:"50%"}]}]}),Ext.define("SpiceCRM.KReporter.DListmanager.view.Spaceholder",{extend:"Ext.panel.Panel",alias:["widget.Spaceholder"],items:[{xtype:"textfield",value:"space holder"}]}),Ext.define("SpiceCRM.KReporter.DListmanager.view.main.Main",{extend:"Ext.container.Container",requires:["SpiceCRM.KReporter.DListmanager.controller.MainController"],xtype:"app-main",height:Ext.getBody().getViewSize().height-150,width:"100%",renderTo:"kreportdlistmanager",border:!1,controller:"KReportDListmanagerMain",layout:{type:"hbox"},style:{"background-color":"transparent"},items:[{xtype:"KReportDListmanagerlistDListsGrid",width:"30%"},{xtype:"KReportDListmanagerDistributionTabsGrid",width:"70%"}]}),Ext.define("SpiceCRM.KReporter.DListmanager.view.KReportDListmanager.popupContactsGrid",{extend:"Ext.grid.Panel",store:Ext.create("SpiceCRM.KReporter.DListmanager.store.listContacts",{storeId:"KReportDListmanagerPopupContactsStore"}),alias:["widget.KReportDListmanagerpopupContactsGrid"],controller:"KReportDListmanagerPopupContactsController",columns:[{text:languageGetText("LBL_DLIST_CONTACT_ID"),dataIndex:"id",itemId:"contactid",sortable:!1,width:150,hidden:!0},{text:languageGetText("LBL_DLIST_CONTACT_ACCOUNTNAME"),dataIndex:"accountname",itemId:"accountname",sortable:!1,flex:1},{text:languageGetText("LBL_DLIST_CONTACT_ACCOUNTID"),dataIndex:"accountid",itemId:"accountid",sortable:!1,flex:1,hidden:!0},{text:languageGetText("LBL_DLIST_FIRSTNAME"),dataIndex:"firstname",itemId:"firstname",sortable:!1,flex:1},{text:languageGetText("LBL_DLIST_LASTNAME"),dataIndex:"lastname",itemId:"lastname",sortable:!1,flex:1},{text:languageGetText("LBL_DLIST_EMAIL1"),dataIndex:"email1",itemId:"email1",sortable:!1,flex:1}],selModel:{selType:"rowmodel",mode:"MULTI"},anchor:"100%",height:400,tbar:[{xtype:"textfield",itemId:"fieldFilter",fieldLabel:languageGetText("LBL_DLIST_SEARCH")}]}),Ext.define("SpiceCRM.KReporter.DListmanager.view.KReportDListmanager.popupKReportsGrid",{extend:"Ext.grid.Panel",store:Ext.create("SpiceCRM.KReporter.DListmanager.store.listKReports",{storeId:"KReportDListmanagerPopupKReportsStore"}),alias:["widget.KReportDListmanagerpopupKReportsGrid"],controller:"KReportDListmanagerPopupKReportsController",columns:[{text:"name",dataIndex:"name",flex:1},{text:"modulename",dataIndex:"modulename",flex:1}],selModel:{selType:"rowmodel",mode:"MULTI"},anchor:"100%",height:400,tbar:[{xtype:"textfield",itemId:"fieldFilter",fieldLabel:languageGetText("LBL_SELECT")}]}),Ext.define("SpiceCRM.KReporter.DListmanager.view.KReportDListmanager.popupUsersGrid",{extend:"Ext.grid.Panel",store:Ext.create("SpiceCRM.KReporter.DListmanager.store.listUsers",{storeId:"KReportDListmanagerPopupUsersStore"}),alias:["widget.KReportDListmanagerpopupUsersGrid"],controller:"KReportDListmanagerPopupUsersController",columns:[{text:languageGetText("LBL_DLIST_USER_ID"),dataIndex:"id",itemId:"userid",sortable:!1,width:150,hidden:!0},{text:languageGetText("LBL_DLIST_USER_USERNAME"),dataIndex:"username",itemId:"username",sortable:!1,flex:1},{text:languageGetText("LBL_DLIST_FIRSTNAME"),dataIndex:"firstname",itemId:"firstname",sortable:!1,flex:1},{text:languageGetText("LBL_DLIST_LASTNAME"),dataIndex:"lastname",itemId:"lastname",sortable:!1,flex:1}],selModel:{selType:"rowmodel",mode:"MULTI"},anchor:"100%",height:400,tbar:[{xtype:"textfield",itemId:"fieldFilter",fieldLabel:languageGetText("LBL_SELECT")}]}),Ext.enableAriaButtons=!1,Ext.define("SpiceCRM.KReporter.DListmanager.Application",{namespaces:["SpiceCRM.KReporter.DListmanager"],controllers:["Application"],extend:"Ext.app.Application",name:"SpiceCRM.KReporter.DListmanager",thisMainView:!1,launch:function(){SpiceCRM.KReporter.DListmanager.Application=this,this.thisMainView=Ext.create("SpiceCRM.KReporter.DListmanager.view.main.Main")},getRand:function(){return Math.random()},S4:function(){return(65536*(1+this.getRand())|0).toString(16).substring(1)},kGuid:function(){return"k"+this.S4()+this.S4()+this.S4()+this.S4()+this.S4()+this.S4()+this.S4()}}),Ext.application({extend:"SpiceCRM.KReporter.DListmanager.Application"});